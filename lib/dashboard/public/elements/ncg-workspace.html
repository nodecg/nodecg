<link rel="import" href="/bower_components/paper-spinner/paper-spinner.html">
<link rel="import" href="ncg-dashboard-panel.html">

<dom-module id="ncg-workspace">
	<template>
		<style>
			:host {
				display: block;
				width: 100%;
				height: 100%;
				pointer-events: none;
				box-sizing: border-box;
			}

			#panels {
				transform: translateY(40px);
				opacity: 0;
				transition: opacity 500ms ease, transform 600ms ease-out;
			}

			:host(:not([fullbleed])) {
				padding: 32px;
			}

			:host(:not([fullbleed])) #panels {
				padding-bottom: 32px;
			}

			#panels {
				width: 100%;
				height: 100%;
			}

			#loadingSpinner {
				position: fixed;
				top: 50%;
				left: 50%;
				transform: translate(-50%);
				width: 68px;
				height: 68px;
				--paper-spinner-stroke-width: 5px;
				--paper-spinner-layer-1-color: #645BA6;
				--paper-spinner-layer-2-color: #A50074;
				--paper-spinner-layer-3-color: #5BA664;
				--paper-spinner-layer-4-color: #C9513E;
			}

			iframe {
				width: 100%;
			}
		</style>

		<div id="panels">
			<template is="dom-repeat" items="[[panels]]" as="panel">
				<ncg-dashboard-panel
					id="[[panel.bundleName]]_[[panel.name]]"
					display-title="[[panel.title]]"
					bundle="[[panel.bundleName]]"
					panel="[[panel.name]]"
					header-color="[[panel.headerColor]]"
					width="[[panel.width]]"
					on-transitioning-changed="_handlePanelCollapseTransition"
					fullbleed="[[panel.fullbleed]]">
					<iframe
						src="/bundles/[[panel.bundleName]]/dashboard/[[panel.file]]"
						frameborder="0"
						scrolling$="[[_calcIframeScrolling(panel.fullbleed)]]"
						id="[[panel.bundleName]]_[[panel.name]]_iframe"
						on-iframe-resized="shiftPackery"
						fullbleed$="[[panel.fullbleed]]">
					</iframe>
				</ncg-dashboard-panel>
			</template>
		</div>

		<paper-spinner id="loadingSpinner" active></paper-spinner>
	</template>

	<script src="ncg-workspace.js"></script>
</dom-module>
