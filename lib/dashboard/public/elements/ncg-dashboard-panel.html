<link rel="import" href="/bower_components/paper-material/paper-material.html">
<link rel="import" href="/bower_components/paper-styles/typography.html">
<link rel="import" href="/bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="/bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="/bower_components/iron-localstorage/iron-localstorage.html">
<link rel="import" href="ncg-dashboard-panel-info-dialog.html">

<dom-module id="ncg-dashboard-panel">
	<template>
		<style>
			:host {
				display: inline-block;
				width: 128px;
			}

			:host([width="1"]) {
				width: 128px;
			}

			:host([width="2"]) {
				width: 272px;
			}

			:host([width="3"]) {
				width: 416px;
			}

			:host([width="4"]) {
				width: 560px;
			}

			:host([width="5"]) {
				width: 704px;
			}

			:host([width="6"]) {
				width: 848px;
			}

			:host([width="7"]) {
				width: 992px;
			}

			:host([width="8"]) {
				width: 1136px;
			}

			#header {
				color: var(--google-grey-100);
				@apply(--layout-horizontal);
				@apply(--layout-end-justified);
				@apply(--layout-center);
				@apply(--paper-font-title);
				overflow: hidden;
			}

			#displayTitle {
				position: absolute;
				left: 15px;
				top: 6px;
			}

			#buttons {
				@apply(--layout-horizontal);
				@apply(--layout-center);
				padding-left: 8px;
				transform: translateX(100%);
				transition: transform 200ms ease;
			}

			#more {
				position: absolute;
				right: 10px;
				top: 8px;
			}

			#buttonsContainer {
				z-index: 1;
			}

			#header:hover #buttons {
				transform: translateX(0%);
			}

			#dragHandle {
				cursor: -webkit-grab;
				cursor: -moz-grab;
				cursor: grab;
			}

			#dragHandle:active {
				cursor: -webkit-grabbing;
				cursor: -moz-grabbing;
				cursor: grabbing;
			}

			#body {
				padding: 0;
				background-color: #f5f5f5;
			}
		</style>

		<iron-localstorage
			name="{{computeLocalStorageName(bundle, panel)}}"
		   	value="{{opened}}"
		   	on-iron-localstorage-load-empty="initializeDefaultOpened"></iron-localstorage>

		<paper-material>
			<div id="header">
				<span id="displayTitle">[[displayTitle]]</span>
				<div id="buttonsContainer">
					<iron-icon id="more" icon="chevron-left"></iron-icon>
					<div id="buttons">
						<paper-icon-button id="expandBtn" on-click="toggleCollapse" icon="unfold-less"></paper-icon-button>
						<paper-icon-button id="dragHandle" icon="open-with"></paper-icon-button>
						<paper-icon-button id="infoBtn" icon="info"></paper-icon-button>
					</div>
				</div>
			</div>
			<iron-collapse id="collapse" opened="{{opened}}" transitioning="{{transitioning}}">
				<div id="body" class="collapse-content">
					<content></content>
				</div>
			</iron-collapse>
		</paper-material>
	</template>

	<script src="/dashboard/elements/ncg-dashboard-panel.js"></script>
</dom-module>

